{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/avon/Documents/Projects/web/my-recipe/src/components/form_list.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport 'antd/dist/antd.css';\nimport { Form, Input, Button, Radio, message } from 'antd';\nimport { useDispatch } from 'redux-react-hook';\nimport RecipeListItem from './recipe_list_item';\nimport { showRecipe } from '../actions';\nconst MOCK_LIST = [{\n  \"title\": \"Copycat Chilis Southwest Egg Rolls Recipe\",\n  \"href\": \"\",\n  \"ingredients\": \"avocado, buttermilk, black beans, cayenne, chicken, chili powder, corn, cumin, dill weed, parsley, flour tortillas, garlic powder, green onion, mayonnaise, monterey jack cheese, onions, onion powder, black pepper, red pepper, avocado, salt, salt, sour cream, spinach, tomato, vegetable oil, white vinegar\",\n  \"thumbnail\": \"\"\n}, {\n  \"title\": \"Vegan Egg White Substitute Recipe\",\n  \"href\": \"http://www.grouprecipes.com/11755/vegan-egg-white-substitute.html\",\n  \"ingredients\": \"flax seed, water\",\n  \"thumbnail\": \"\"\n}];\nexport default function FormList(props) {\n  _s();\n\n  const [myLists, setMyLists] = useState([]);\n  const [myTitle, setMyTitle] = useState('');\n  const [myIngredients, setMyIngredients] = useState('');\n  const [myLink, setMyLink] = useState('');\n  const [myImageLink, setMyImageLink] = useState('');\n  const [editID, setEditID] = useState(null);\n  const [startEdit, setStartEdit] = useState(false);\n  const disPatch = useDispatch();\n  const loadAll = useCallback(() => {\n    // load from storage\n    loadStorage();\n  }, []);\n  useEffect(() => {\n    //for temporary\n    // localStorage.clear()\n    loadAll(); // setMyLists(MOCK_LIST) // for test\n  }, [loadAll]);\n  const formRef = /*#__PURE__*/React.createRef(); // const [form] = Form.useForm();\n  // const formLayout = 'vertical'\n\n  const layout = {\n    labelCol: {\n      span: 8,\n      margin: 20\n    },\n    wrapperCol: {\n      span: 16,\n      margin: 20\n    }\n  };\n  const tailLayout = {\n    wrapperCol: {\n      offset: 8,\n      span: 16\n    }\n  }; // const onFinish = (values) => {\n  //     console.log(values);\n  // };\n\n  const onReset = () => {\n    formRef.current.resetFields();\n  };\n\n  const onInputMyTitle = myt => {\n    setMyTitle(myt);\n  };\n\n  const onInputMyIngredients = myI => {\n    setMyIngredients(myI);\n  };\n\n  const onInputMyLink = myL => {\n    setMyLink(myL);\n  };\n\n  const onInputMyImageLink = myIL => {\n    setMyImageLink(myIL);\n  };\n\n  const loadStorage = () => {\n    let loadDatas = JSON.parse(localStorage.getItem('myDatas'));\n\n    if (loadDatas) {\n      setMyLists(loadDatas);\n    }\n  };\n\n  const saveToStorage = () => {\n    // console.log('現在資料是？', myTitle, myIngredients)\n    if (myTitle != '' && myIngredients != '') {\n      // console.log('要來存囉！')\n      let addOne = [{\n        \"id\": startEdit === false ? myLists.length == 0 ? 0 : myLists[myLists.length - 1].id + 1 : editID,\n        \"title\": myTitle,\n        \"href\": myLink !== null && myLink !== void 0 ? myLink : \"\",\n        \"ingredients\": myIngredients,\n        \"thumbnail\": myImageLink !== null && myImageLink !== void 0 ? myImageLink : \"\",\n        'removeIcon': true,\n        'editIcon': true\n      }];\n      let newList;\n\n      if (startEdit === false) {\n        newList = myLists.concat(addOne);\n        console.log('只有新增！！！');\n      } else {\n        setStartEdit(false);\n        const index = myLists.findIndex(food => food.id === editID);\n        console.log(\"這應該要對！\", myLists.splice(index, 1, addOne));\n        newList = myLists.splice(index, 1, addOne);\n        console.log('要修改！且修改的id是？', editID, '在第幾個？', index);\n        console.log('修改後的list???', newList);\n      }\n\n      console.log('要存擋的list???', newList);\n      setMyLists(newList);\n      localStorage.setItem('myDatas', JSON.stringify(newList));\n    }\n  };\n\n  const editRecipe = recipe => {\n    formRef.current.setFieldsValue({\n      title: recipe.title,\n      ingredients: recipe.ingredients,\n      link: recipe.href,\n      imagelink: recipe.thumbnail\n    });\n    setEditID(recipe.id);\n    setStartEdit(true);\n    console.log('要修改的id在？？', recipe.id);\n  };\n\n  const removeRecipe = recipe => {\n    // for (var i = 0; i < myLists.length; i++) {\n    //     if (myLists[i].title === recipe.title) {\n    //         myLists.splice(i, 1);\n    //     }\n    // }\n    const index = myLists.findIndex(food => food.id === recipe.id);\n    myLists.splice(index, 1);\n    setMyLists(myLists);\n    localStorage.setItem('myDatas', JSON.stringify(myLists));\n    loadAll();\n  };\n\n  const getMyRecipeItems = () => {\n    // console.log('要來列出my list了！！！', myLists)\n    if (myLists.length > 0) {\n      // console.log('要開始渲染資料！my!', myLists)\n      return myLists.map(myList => {\n        // console.log('每一筆資料 my：：：', myList)\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(RecipeListItem, {\n            recipe: myList,\n            onRecipeSelect: myList => {\n              if (myList.href.length > 0) {\n                disPatch(showRecipe(myList.href));\n              } else {\n                message.error(`No link here`, 2.5);\n              }\n            }\n          }, myList.title, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'relative'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: -40,\n                right: 0\n              },\n              children: [myList.editIcon === true ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"../assets/images/edit.png\",\n                alt: \"edit image\",\n                onClick: () => editRecipe(myList),\n                style: {\n                  width: 20,\n                  height: 20,\n                  marginRight: 8\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 61\n              }, this) : null, myList.removeIcon === true ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"../assets/images/close.png\",\n                alt: \"delete image\",\n                onClick: () => removeRecipe(myList),\n                style: {\n                  width: 20,\n                  height: 20,\n                  marginRight: 8\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 63\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, { ...layout,\n    ref: formRef,\n    name: \"control-ref\",\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"title\",\n      label: \"Recipe Title\",\n      rules: [{\n        required: true\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"e.g spaghetti, sushi, fries\",\n        value: myTitle,\n        onChange: e => onInputMyTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"ingredients\",\n      label: \"Ingredients\",\n      rules: [{\n        required: true\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"e.g onion, garlic, bread, etc\",\n        value: myIngredients,\n        onChange: e => onInputMyIngredients(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"link\",\n      label: \"Recipe Link\",\n      rules: [{\n        required: false\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"recipe link...\",\n        value: myLink,\n        onChange: e => onInputMyLink(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"imagelink\",\n      label: \"Image\",\n      rules: [{\n        required: false\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"recipe image link...\",\n        value: myImageLink,\n        onChange: e => onInputMyImageLink(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailLayout,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          marginRight: 8\n        },\n        type: \"primary\",\n        htmlType: \"submit\",\n        onClick: () => saveToStorage(),\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        htmlType: \"button\",\n        onClick: () => onReset(),\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group\",\n      children: getMyRecipeItems()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 9\n  }, this);\n}\n\n_s(FormList, \"JaWL18PlUYiW7TsHvBRG+bQthM0=\", false, function () {\n  return [useDispatch];\n});\n\n_c = FormList;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormList\");","map":{"version":3,"sources":["/Users/avon/Documents/Projects/web/my-recipe/src/components/form_list.js"],"names":["React","useState","useEffect","useCallback","Form","Input","Button","Radio","message","useDispatch","RecipeListItem","showRecipe","MOCK_LIST","FormList","props","myLists","setMyLists","myTitle","setMyTitle","myIngredients","setMyIngredients","myLink","setMyLink","myImageLink","setMyImageLink","editID","setEditID","startEdit","setStartEdit","disPatch","loadAll","loadStorage","formRef","createRef","layout","labelCol","span","margin","wrapperCol","tailLayout","offset","onReset","current","resetFields","onInputMyTitle","myt","onInputMyIngredients","myI","onInputMyLink","myL","onInputMyImageLink","myIL","loadDatas","JSON","parse","localStorage","getItem","saveToStorage","addOne","length","id","newList","concat","console","log","index","findIndex","food","splice","setItem","stringify","editRecipe","recipe","setFieldsValue","title","ingredients","link","href","imagelink","thumbnail","removeRecipe","getMyRecipeItems","map","myList","error","position","top","right","editIcon","width","height","marginRight","removeIcon","required","e","target","value"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,OAAO,oBAAP;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,EAA8BC,KAA9B,EAAqCC,OAArC,QAAoD,MAApD;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,SAASC,UAAT,QAA2B,YAA3B;AAEA,MAAMC,SAAS,GAAG,CACd;AACI,WAAS,2CADb;AAEI,UAAQ,EAFZ;AAGI,iBAAe,kTAHnB;AAII,eAAa;AAJjB,CADc,EAOd;AACI,WAAS,mCADb;AAEI,UAAQ,mEAFZ;AAGI,iBAAe,kBAHnB;AAII,eAAa;AAJjB,CAPc,CAAlB;AAeA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAAA;;AAEpC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACkB,aAAD,EAAgBC,gBAAhB,IAAoCnB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACoB,MAAD,EAASC,SAAT,IAAsBrB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACsB,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACwB,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAAC0B,SAAD,EAAYC,YAAZ,IAA4B3B,QAAQ,CAAC,KAAD,CAA1C;AAEA,QAAM4B,QAAQ,GAAGpB,WAAW,EAA5B;AAEA,QAAMqB,OAAO,GAAG3B,WAAW,CAAC,MAAM;AAC9B;AACA4B,IAAAA,WAAW;AACd,GAH0B,EAGxB,EAHwB,CAA3B;AAKA7B,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA;AAEA4B,IAAAA,OAAO,GAJK,CAKZ;AACH,GANQ,EAMN,CAACA,OAAD,CANM,CAAT;AAQA,QAAME,OAAO,gBAAGhC,KAAK,CAACiC,SAAN,EAAhB,CAzBoC,CA0BpC;AACA;;AACA,QAAMC,MAAM,GAAG;AACXC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,IAAI,EAAE,CADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KADC;AAKXC,IAAAA,UAAU,EAAE;AACRF,MAAAA,IAAI,EAAE,EADE;AAERC,MAAAA,MAAM,EAAE;AAFA;AALD,GAAf;AAUA,QAAME,UAAU,GAAG;AACfD,IAAAA,UAAU,EAAE;AACRE,MAAAA,MAAM,EAAE,CADA;AAERJ,MAAAA,IAAI,EAAE;AAFE;AADG,GAAnB,CAtCoC,CA6CpC;AACA;AACA;;AACA,QAAMK,OAAO,GAAG,MAAM;AAClBT,IAAAA,OAAO,CAACU,OAAR,CAAgBC,WAAhB;AACH,GAFD;;AAGA,QAAMC,cAAc,GAAIC,GAAD,IAAS;AAC5B3B,IAAAA,UAAU,CAAC2B,GAAD,CAAV;AACH,GAFD;;AAGA,QAAMC,oBAAoB,GAAIC,GAAD,IAAS;AAClC3B,IAAAA,gBAAgB,CAAC2B,GAAD,CAAhB;AACH,GAFD;;AAGA,QAAMC,aAAa,GAAIC,GAAD,IAAS;AAC3B3B,IAAAA,SAAS,CAAC2B,GAAD,CAAT;AACH,GAFD;;AAGA,QAAMC,kBAAkB,GAAIC,IAAD,IAAU;AACjC3B,IAAAA,cAAc,CAAC2B,IAAD,CAAd;AACH,GAFD;;AAGA,QAAMpB,WAAW,GAAG,MAAM;AACtB,QAAIqB,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAhB;;AACA,QAAIJ,SAAJ,EAAe;AACXpC,MAAAA,UAAU,CAACoC,SAAD,CAAV;AACH;AACJ,GALD;;AAMA,QAAMK,aAAa,GAAG,MAAM;AACxB;AACA,QAAIxC,OAAO,IAAI,EAAX,IAAiBE,aAAa,IAAI,EAAtC,EAA0C;AACtC;AACA,UAAIuC,MAAM,GAAG,CAAC;AACV,cAAO/B,SAAS,KAAK,KAAf,GAAyBZ,OAAO,CAAC4C,MAAR,IAAkB,CAAlB,GAAsB,CAAtB,GAA0B5C,OAAO,CAACA,OAAO,CAAC4C,MAAR,GAAiB,CAAlB,CAAP,CAA4BC,EAA5B,GAAiC,CAApF,GAAyFnC,MADrF;AAEV,iBAASR,OAFC;AAGV,gBAAQI,MAAR,aAAQA,MAAR,cAAQA,MAAR,GAAkB,EAHR;AAIV,uBAAeF,aAJL;AAKV,qBAAaI,WAAb,aAAaA,WAAb,cAAaA,WAAb,GAA4B,EALlB;AAMV,sBAAc,IANJ;AAOV,oBAAY;AAPF,OAAD,CAAb;AAUA,UAAIsC,OAAJ;;AACA,UAAIlC,SAAS,KAAK,KAAlB,EAAyB;AACrBkC,QAAAA,OAAO,GAAG9C,OAAO,CAAC+C,MAAR,CAAeJ,MAAf,CAAV;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,OAHD,MAGO;AACHpC,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACA,cAAMqC,KAAK,GAAGlD,OAAO,CAACmD,SAAR,CAAkBC,IAAI,IAAIA,IAAI,CAACP,EAAL,KAAYnC,MAAtC,CAAd;AACAsC,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBjD,OAAO,CAACqD,MAAR,CAAeH,KAAf,EAAsB,CAAtB,EAAyBP,MAAzB,CAAtB;AACAG,QAAAA,OAAO,GAAG9C,OAAO,CAACqD,MAAR,CAAeH,KAAf,EAAsB,CAAtB,EAAyBP,MAAzB,CAAV;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BvC,MAA5B,EAAoC,OAApC,EAA6CwC,KAA7C;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,OAA3B;AACH;;AAEDE,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,OAA3B;AACA7C,MAAAA,UAAU,CAAC6C,OAAD,CAAV;AACAN,MAAAA,YAAY,CAACc,OAAb,CAAqB,SAArB,EAAgChB,IAAI,CAACiB,SAAL,CAAeT,OAAf,CAAhC;AAEH;AACJ,GAhCD;;AAkCA,QAAMU,UAAU,GAAIC,MAAD,IAAY;AAC3BxC,IAAAA,OAAO,CAACU,OAAR,CAAgB+B,cAAhB,CAA+B;AAC3BC,MAAAA,KAAK,EAAEF,MAAM,CAACE,KADa;AAE3BC,MAAAA,WAAW,EAAEH,MAAM,CAACG,WAFO;AAG3BC,MAAAA,IAAI,EAAEJ,MAAM,CAACK,IAHc;AAI3BC,MAAAA,SAAS,EAAEN,MAAM,CAACO;AAJS,KAA/B;AAMArD,IAAAA,SAAS,CAAC8C,MAAM,CAACZ,EAAR,CAAT;AACAhC,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAmC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBQ,MAAM,CAACZ,EAAhC;AAEH,GAXD;;AAYA,QAAMoB,YAAY,GAAIR,MAAD,IAAY;AAC7B;AACA;AACA;AACA;AACA;AACA,UAAMP,KAAK,GAAGlD,OAAO,CAACmD,SAAR,CAAkBC,IAAI,IAAIA,IAAI,CAACP,EAAL,KAAYY,MAAM,CAACZ,EAA7C,CAAd;AACA7C,IAAAA,OAAO,CAACqD,MAAR,CAAeH,KAAf,EAAsB,CAAtB;AACAjD,IAAAA,UAAU,CAACD,OAAD,CAAV;AACAwC,IAAAA,YAAY,CAACc,OAAb,CAAqB,SAArB,EAAgChB,IAAI,CAACiB,SAAL,CAAevD,OAAf,CAAhC;AACAe,IAAAA,OAAO;AACV,GAXD;;AAYA,QAAMmD,gBAAgB,GAAG,MAAM;AAC3B;AACA,QAAIlE,OAAO,CAAC4C,MAAR,GAAiB,CAArB,EAAwB;AAEpB;AACA,aAAQ5C,OAAO,CAACmE,GAAR,CAAYC,MAAM,IAAI;AAC1B;AACA,4BACI;AAAA,kCACI,QAAC,cAAD;AACI,YAAA,MAAM,EAAEA,MADZ;AAGI,YAAA,cAAc,EAAEA,MAAM,IAAI;AACtB,kBAAIA,MAAM,CAACN,IAAP,CAAYlB,MAAZ,GAAqB,CAAzB,EAA4B;AACxB9B,gBAAAA,QAAQ,CAAClB,UAAU,CAACwE,MAAM,CAACN,IAAR,CAAX,CAAR;AACH,eAFD,MAEO;AACHrE,gBAAAA,OAAO,CAAC4E,KAAR,CAAe,cAAf,EAA8B,GAA9B;AACH;AACJ;AATL,aAESD,MAAM,CAACT,KAFhB;AAAA;AAAA;AAAA;AAAA,kBADJ,eAaI;AAAK,YAAA,KAAK,EAAE;AAAEW,cAAAA,QAAQ,EAAE;AAAZ,aAAZ;AAAA,mCACI;AAAK,cAAA,KAAK,EAAE;AAAEA,gBAAAA,QAAQ,EAAE,UAAZ;AAAwBC,gBAAAA,GAAG,EAAE,CAAC,EAA9B;AAAkCC,gBAAAA,KAAK,EAAE;AAAzC,eAAZ;AAAA,yBACKJ,MAAM,CAACK,QAAP,KAAoB,IAApB,gBAA2B;AAAK,gBAAA,GAAG,EAAC,2BAAT;AAAqC,gBAAA,GAAG,EAAC,YAAzC;AAAsD,gBAAA,OAAO,EAAE,MAAMjB,UAAU,CAACY,MAAD,CAA/E;AACxB,gBAAA,KAAK,EAAE;AAAEM,kBAAAA,KAAK,EAAE,EAAT;AAAaC,kBAAAA,MAAM,EAAE,EAArB;AAAyBC,kBAAAA,WAAW,EAAE;AAAtC;AADiB;AAAA;AAAA;AAAA;AAAA,sBAA3B,GAEI,IAHT,EAIKR,MAAM,CAACS,UAAP,KAAsB,IAAtB,gBAA6B;AAAK,gBAAA,GAAG,EAAC,4BAAT;AAAsC,gBAAA,GAAG,EAAC,cAA1C;AAAyD,gBAAA,OAAO,EAAE,MAAMZ,YAAY,CAACG,MAAD,CAApF;AAC1B,gBAAA,KAAK,EAAE;AAAEM,kBAAAA,KAAK,EAAE,EAAT;AAAaC,kBAAAA,MAAM,EAAE,EAArB;AAAyBC,kBAAAA,WAAW,EAAE;AAAtC;AADmB;AAAA;AAAA;AAAA;AAAA,sBAA7B,GAEI,IANT;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ;AA0BH,OA5BO,CAAR;AA6BH;AACJ,GAnCD;;AAqCA,sBACI,QAAC,IAAD,OACQzD,MADR;AAEI,IAAA,GAAG,EAAEF,OAFT;AAEkB,IAAA,IAAI,EAAC,aAFvB;AAAA,4BAKI,QAAC,IAAD,CAAM,IAAN;AAAW,MAAA,IAAI,EAAC,OAAhB;AAAwB,MAAA,KAAK,EAAC,cAA9B;AAA6C,MAAA,KAAK,EAAE,CAAC;AAAE6D,QAAAA,QAAQ,EAAE;AAAZ,OAAD,CAApD;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,WAAW,EAAC,6BAAnB;AAAiD,QAAA,KAAK,EAAE5E,OAAxD;AAAiE,QAAA,QAAQ,EAAE6E,CAAC,IAAIlD,cAAc,CAACkD,CAAC,CAACC,MAAF,CAASC,KAAV;AAA9F;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YALJ,eAQI,QAAC,IAAD,CAAM,IAAN;AAAW,MAAA,IAAI,EAAC,aAAhB;AAA8B,MAAA,KAAK,EAAC,aAApC;AAAkD,MAAA,KAAK,EAAE,CAAC;AAAEH,QAAAA,QAAQ,EAAE;AAAZ,OAAD,CAAzD;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,WAAW,EAAC,+BAAnB;AAAmD,QAAA,KAAK,EAAE1E,aAA1D;AAAyE,QAAA,QAAQ,EAAE2E,CAAC,IAAIhD,oBAAoB,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV;AAA5G;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YARJ,eAWI,QAAC,IAAD,CAAM,IAAN;AAAW,MAAA,IAAI,EAAC,MAAhB;AAAuB,MAAA,KAAK,EAAC,aAA7B;AAA2C,MAAA,KAAK,EAAE,CAAC;AAAEH,QAAAA,QAAQ,EAAE;AAAZ,OAAD,CAAlD;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,WAAW,EAAC,gBAAnB;AAAoC,QAAA,KAAK,EAAExE,MAA3C;AAAmD,QAAA,QAAQ,EAAEyE,CAAC,IAAI9C,aAAa,CAAC8C,CAAC,CAACC,MAAF,CAASC,KAAV;AAA/E;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAXJ,eAcI,QAAC,IAAD,CAAM,IAAN;AAAW,MAAA,IAAI,EAAC,WAAhB;AAA4B,MAAA,KAAK,EAAC,OAAlC;AAA0C,MAAA,KAAK,EAAE,CAAC;AAAEH,QAAAA,QAAQ,EAAE;AAAZ,OAAD,CAAjD;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,WAAW,EAAC,sBAAnB;AAA0C,QAAA,KAAK,EAAEtE,WAAjD;AAA8D,QAAA,QAAQ,EAAEuE,CAAC,IAAI5C,kBAAkB,CAAC4C,CAAC,CAACC,MAAF,CAASC,KAAV;AAA/F;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAdJ,eAiBI,QAAC,IAAD,CAAM,IAAN,OAAezD,UAAf;AAAA,8BACI,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAAEoD,UAAAA,WAAW,EAAE;AAAf,SAAf;AAAmC,QAAA,IAAI,EAAC,SAAxC;AAAkD,QAAA,QAAQ,EAAC,QAA3D;AAAoE,QAAA,OAAO,EAAE,MAAMlC,aAAa,EAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,MAAD;AAAQ,QAAA,QAAQ,EAAC,QAAjB;AAA0B,QAAA,OAAO,EAAE,MAAMhB,OAAO,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAjBJ,eAqBI;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA,gBACKwC,gBAAgB;AADrB;AAAA;AAAA;AAAA;AAAA,YArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiCH;;GArMuBpE,Q;UAUHJ,W;;;KAVGI,Q","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport 'antd/dist/antd.css';\nimport { Form, Input, Button, Radio, message } from 'antd';\nimport { useDispatch } from 'redux-react-hook'\nimport RecipeListItem from './recipe_list_item'\nimport { showRecipe } from '../actions'\n\nconst MOCK_LIST = [\n    {\n        \"title\": \"Copycat Chilis Southwest Egg Rolls Recipe\",\n        \"href\": \"\",\n        \"ingredients\": \"avocado, buttermilk, black beans, cayenne, chicken, chili powder, corn, cumin, dill weed, parsley, flour tortillas, garlic powder, green onion, mayonnaise, monterey jack cheese, onions, onion powder, black pepper, red pepper, avocado, salt, salt, sour cream, spinach, tomato, vegetable oil, white vinegar\",\n        \"thumbnail\": \"\"\n    },\n    {\n        \"title\": \"Vegan Egg White Substitute Recipe\",\n        \"href\": \"http://www.grouprecipes.com/11755/vegan-egg-white-substitute.html\",\n        \"ingredients\": \"flax seed, water\",\n        \"thumbnail\": \"\"\n    },\n]\n\nexport default function FormList(props) {\n\n    const [myLists, setMyLists] = useState([])\n    const [myTitle, setMyTitle] = useState('')\n    const [myIngredients, setMyIngredients] = useState('')\n    const [myLink, setMyLink] = useState('')\n    const [myImageLink, setMyImageLink] = useState('')\n    const [editID, setEditID] = useState(null)\n    const [startEdit, setStartEdit] = useState(false)\n\n    const disPatch = useDispatch()\n\n    const loadAll = useCallback(() => {\n        // load from storage\n        loadStorage()\n    }, [])\n\n    useEffect(() => {\n        //for temporary\n        // localStorage.clear()\n\n        loadAll()\n        // setMyLists(MOCK_LIST) // for test\n    }, [loadAll])\n\n    const formRef = React.createRef();\n    // const [form] = Form.useForm();\n    // const formLayout = 'vertical'\n    const layout = {\n        labelCol: {\n            span: 8,\n            margin: 20\n        },\n        wrapperCol: {\n            span: 16,\n            margin: 20\n        },\n    };\n    const tailLayout = {\n        wrapperCol: {\n            offset: 8,\n            span: 16,\n        },\n    };\n\n    // const onFinish = (values) => {\n    //     console.log(values);\n    // };\n    const onReset = () => {\n        formRef.current.resetFields();\n    };\n    const onInputMyTitle = (myt) => {\n        setMyTitle(myt)\n    }\n    const onInputMyIngredients = (myI) => {\n        setMyIngredients(myI)\n    }\n    const onInputMyLink = (myL) => {\n        setMyLink(myL)\n    }\n    const onInputMyImageLink = (myIL) => {\n        setMyImageLink(myIL)\n    }\n    const loadStorage = () => {\n        let loadDatas = JSON.parse(localStorage.getItem('myDatas'))\n        if (loadDatas) {\n            setMyLists(loadDatas)\n        }\n    }\n    const saveToStorage = () => {\n        // console.log('現在資料是？', myTitle, myIngredients)\n        if (myTitle != '' && myIngredients != '') {\n            // console.log('要來存囉！')\n            let addOne = [{\n                \"id\": (startEdit === false) ? (myLists.length == 0 ? 0 : myLists[myLists.length - 1].id + 1) : editID,\n                \"title\": myTitle,\n                \"href\": myLink ?? \"\",\n                \"ingredients\": myIngredients,\n                \"thumbnail\": myImageLink ?? \"\",\n                'removeIcon': true,\n                'editIcon': true\n            }]\n\n            let newList\n            if (startEdit === false) {\n                newList = myLists.concat(addOne)\n                console.log('只有新增！！！')\n            } else {\n                setStartEdit(false)\n                const index = myLists.findIndex(food => food.id === editID);\n                console.log(\"這應該要對！\", myLists.splice(index, 1, addOne))\n                newList = myLists.splice(index, 1, addOne);\n                console.log('要修改！且修改的id是？', editID, '在第幾個？', index)\n                console.log('修改後的list???', newList)\n            }\n\n            console.log('要存擋的list???', newList)\n            setMyLists(newList)\n            localStorage.setItem('myDatas', JSON.stringify(newList))\n\n        }\n    }\n\n    const editRecipe = (recipe) => {\n        formRef.current.setFieldsValue({\n            title: recipe.title,\n            ingredients: recipe.ingredients,\n            link: recipe.href,\n            imagelink: recipe.thumbnail\n        });\n        setEditID(recipe.id)\n        setStartEdit(true)\n        console.log('要修改的id在？？', recipe.id)\n\n    }\n    const removeRecipe = (recipe) => {\n        // for (var i = 0; i < myLists.length; i++) {\n        //     if (myLists[i].title === recipe.title) {\n        //         myLists.splice(i, 1);\n        //     }\n        // }\n        const index = myLists.findIndex(food => food.id === recipe.id);\n        myLists.splice(index, 1);\n        setMyLists(myLists)\n        localStorage.setItem('myDatas', JSON.stringify(myLists))\n        loadAll()\n    }\n    const getMyRecipeItems = () => {\n        // console.log('要來列出my list了！！！', myLists)\n        if (myLists.length > 0) {\n\n            // console.log('要開始渲染資料！my!', myLists)\n            return (myLists.map(myList => {\n                // console.log('每一筆資料 my：：：', myList)\n                return (\n                    <div>\n                        <RecipeListItem\n                            recipe={myList}\n                            key={myList.title}\n                            onRecipeSelect={myList => {\n                                if (myList.href.length > 0) {\n                                    disPatch(showRecipe(myList.href))\n                                } else {\n                                    message.error(`No link here`, 2.5);\n                                }\n                            }\n                            }\n                        />\n                        <div style={{ position: 'relative' }}>\n                            <div style={{ position: 'absolute', top: -40, right: 0 }}>\n                                {myList.editIcon === true ? <img src=\"../assets/images/edit.png\" alt=\"edit image\" onClick={() => editRecipe(myList)}\n                                    style={{ width: 20, height: 20, marginRight: 8 }}\n                                /> : null}\n                                {myList.removeIcon === true ? <img src=\"../assets/images/close.png\" alt=\"delete image\" onClick={() => removeRecipe(myList)}\n                                    style={{ width: 20, height: 20, marginRight: 8 }}\n                                /> : null}\n                            </div>\n                        </div>\n                    </div>\n                )\n            }))\n        }\n    }\n\n    return (\n        <Form\n            {...layout}\n            ref={formRef} name=\"control-ref\"\n        >\n\n            <Form.Item name=\"title\" label=\"Recipe Title\" rules={[{ required: true }]}>\n                <Input placeholder=\"e.g spaghetti, sushi, fries\" value={myTitle} onChange={e => onInputMyTitle(e.target.value)} />\n            </Form.Item>\n            <Form.Item name=\"ingredients\" label=\"Ingredients\" rules={[{ required: true }]}>\n                <Input placeholder=\"e.g onion, garlic, bread, etc\" value={myIngredients} onChange={e => onInputMyIngredients(e.target.value)} />\n            </Form.Item>\n            <Form.Item name=\"link\" label=\"Recipe Link\" rules={[{ required: false }]}>\n                <Input placeholder=\"recipe link...\" value={myLink} onChange={e => onInputMyLink(e.target.value)} />\n            </Form.Item>\n            <Form.Item name=\"imagelink\" label=\"Image\" rules={[{ required: false }]}>\n                <Input placeholder=\"recipe image link...\" value={myImageLink} onChange={e => onInputMyImageLink(e.target.value)} />\n            </Form.Item>\n            <Form.Item {...tailLayout}>\n                <Button style={{ marginRight: 8 }} type=\"primary\" htmlType=\"submit\" onClick={() => saveToStorage()}>Submit</Button>\n                <Button htmlType=\"button\" onClick={() => onReset()}>Reset</Button>\n            </Form.Item>\n            <ul className=\"list-group\">\n                {getMyRecipeItems()}\n            </ul>\n        </Form >\n\n\n\n    )\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}